<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fugth AI Anvil - Application Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Lora:wght@400;500;600&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --c-dark-bg: #0a0a0a;
            --c-dark-card: rgba(26, 26, 29, 0.7);
            --c-dark-border: rgba(255, 255, 255, 0.1);
            --c-pro-glow: rgba(139, 92, 246, 0.5);
        }
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; background-color: var(--c-dark-bg); color: #f9fafb; }
        .step-card { background-color: var(--c-dark-card); border: 1px solid var(--c-dark-border); backdrop-filter: blur(12px); transition: all 0.3s ease; }
        .step-card:hover { border-color: #818cf8; }
        
        /* --- Gizmo & Pro Badge Styles --- */
        .gizmo-accordion-header { background-color: rgba(255,255,255,0.05); transition: background-color 0.2s ease; }
        .gizmo-accordion-header:hover { background-color: rgba(255,255,255,0.1); }
        .gizmo-accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; }
        .pro-badge { background-color: #8B5CF6; color: white; font-size: 0.65rem; font-weight: 800; padding: 2px 6px; border-radius: 99px; line-height: 1; text-transform: uppercase; }
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #374151; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #6366f1; }
        input:checked + .slider:before { transform: translateX(22px); }

        /* --- Canvas Preview (Application Shell) Styles --- */
        #canvas-preview { --shell-bg: #111827; --shell-text: #f9fafb; --shell-border: #374151; --shell-header-bg: #1f2937; --shell-accent: #6366f1; --shell-accent-text: #ffffff; }
        #canvas-preview.theme-light { --shell-bg: #f9fafb; --shell-text: #111827; --shell-border: #d1d5db; --shell-header-bg: #e5e7eb; }
        #canvas-preview .app-shell { background-color: var(--shell-bg); color: var(--shell-text); border: 1px solid var(--shell-border); }
        #canvas-preview .app-title-bar { background-color: var(--shell-header-bg); border-bottom: 1px solid var(--shell-border); }
        #canvas-preview .app-tab { border-bottom: 3px solid transparent; color: var(--shell-text); opacity: 0.6; }
        #canvas-preview .app-tab.active { border-bottom-color: var(--shell-accent); color: var(--shell-text); opacity: 1; }
        #canvas-preview .app-tab-content { display: none; }
        #canvas-preview .app-tab-content.active { display: block; }
        #canvas-preview .app-button { background-color: var(--shell-accent); color: var(--shell-accent-text); }
        
        /* --- Finalize Section --- */
        .tier-card { background-color: rgba(31, 41, 55, 0.5); border: 1px solid var(--c-dark-border); }
        .tier-card.pro { border-color: #8B5CF6; box-shadow: 0 0 25px var(--c-pro-glow); }
        .tier-card ul li { background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%234ade80"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>') no-repeat left center; padding-left: 1.75rem; }
        .tier-card ul li.disabled { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%23f87171"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" /></svg>'); }

    </style>
</head>
<body class="bg-gray-900 text-white">

    <header class="bg-black bg-opacity-50 backdrop-blur-lg sticky top-0 z-40 border-b border-gray-800">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="flex items-center gap-3">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 6H19L17 14H7L5 6Z" fill="url(#p)"/><path d="M4 14V18C4 19.1046 4.89543 20 6 20H18C19.1046 20 20 19.1046 20 18V14H4Z" fill="url(#q)"/><path d="M8 6L12 2L16 6" stroke="url(#r)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><defs><linearGradient id="p" x1="5" y1="10" x2="19" y2="10" gradientUnits="userSpaceOnUse"><stop stop-color="#a5b4fc"/><stop offset="1" stop-color="#818cf8"/></linearGradient><linearGradient id="q" x1="4" y1="17" x2="20" y2="17" gradientUnits="userSpaceOnUse"><stop stop-color="#6366f1"/><stop offset="1" stop-color="#4f46e5"/></linearGradient><linearGradient id="r" x1="8" y1="4" x2="16" y2="4" gradientUnits="userSpaceOnUse"><stop stop-color="#f87171"/><stop offset="1" stop-color="#fb923c"/></linearGradient></defs></svg>
                <span class="text-2xl font-bold">Fugth AI Anvil</span>
            </a>
            <a href="#finalize" class="bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg font-semibold transition-colors">Get Started</a>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-16 space-y-24">
        <section id="define-personality" class="step-card rounded-2xl p-8 md:p-12">
            <h2 class="text-3xl md:text-4xl font-bold mb-6"><span class="text-indigo-400">Step 1:</span> Define Core Personality</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <label for="project-name" class="text-gray-400 mb-2 block font-medium">Project Name</label>
                    <input type="text" id="project-name" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3 text-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition" placeholder="My Productivity App">
                </div>
                <div>
                    <label for="ai-description" class="text-gray-400 mb-2 block font-medium">Core AI Directive</label>
                    <textarea id="ai-description" class="w-full h-24 bg-gray-900 border border-gray-700 rounded-lg p-3 text-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition" placeholder="e.g., An AI assistant to help users code faster..."></textarea>
                </div>
            </div>
        </section>

        <section id="customize-ui" class="step-card rounded-2xl p-8 md:p-12">
            <h2 class="text-3xl md:text-4xl font-bold mb-6"><span class="text-indigo-400">Step 2:</span> Sculpt Your Application</h2>
            <div class="grid lg:grid-cols-5 gap-8 items-start">
                
                <div id="gizmo-editor" class="lg:col-span-2 space-y-4">
                    <div class="gizmo-accordion">
                        <button class="gizmo-accordion-header w-full text-left p-4 rounded-lg flex justify-between items-center"><h3 class="text-xl font-bold">Application Shell</h3><svg class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button>
                        <div class="gizmo-accordion-content p-4 space-y-3">
                            <div class="gizmo-control"><label for="app-theme">Theme</label><select id="app-theme" class="bg-gray-700 rounded p-1"><option value="dark">Dark</option><option value="light">Light</option></select></div>
                            <div class="gizmo-control"><label for="accent-color">Accent Color</label><input type="color" id="accent-color"></div>
                        </div>
                    </div>
                    <div class="gizmo-accordion">
                        <button class="gizmo-accordion-header w-full text-left p-4 rounded-lg flex justify-between items-center"><h3 class="text-xl font-bold">Chat Interface</h3><svg class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button>
                        <div class="gizmo-accordion-content p-4 space-y-3">
                            <div class="gizmo-control"><label for="ai-bubble-color">AI Bubble</label><input type="color" id="ai-bubble-color"></div>
                            <div class="gizmo-control"><label for="user-bubble-color">User Bubble</label><input type="color" id="user-bubble-color"></div>
                        </div>
                    </div>
                    <div class="gizmo-accordion">
                        <button class="gizmo-accordion-header w-full text-left p-4 rounded-lg flex justify-between items-center">
                            <div class="flex items-center gap-2"><h3 class="text-xl font-bold">Integrated Tools</h3><span class="pro-badge">Pro</span></div>
                            <svg class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="gizmo-accordion-content p-4 space-y-3">
                            <div class="gizmo-control"><label for="tool-code-editor">Code Editor</label><label class="switch"><input type="checkbox" class="tool-toggle" id="tool-code-editor" data-tool="Code"><span class="slider"></span></label></div>
                            <div class="gizmo-control"><label for="tool-knowledge-base">Knowledge Base</label><label class="switch"><input type="checkbox" class="tool-toggle" id="tool-knowledge-base" data-tool="Knowledge"><span class="slider"></span></label></div>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-3">
                     <div id="canvas-preview" class="transition-all duration-300">
                        <div class="app-shell rounded-lg shadow-2xl overflow-hidden">
                            <div class="app-title-bar h-10 flex items-center px-4">
                                <div class="text-center flex-grow font-semibold" id="app-title-text">My Productivity App</div>
                            </div>
                            <div class="app-body h-[600px] flex flex-col">
                                <div class="app-tab-bar flex items-center space-x-2 px-4 border-b"></div>
                                <div class="app-content-area flex-grow p-4 overflow-y-auto">
                                    <div id="content-Chat" class="app-tab-content">
                                        <div class="mb-4 flex justify-start"><div id="preview-ai-bubble" class="p-3 rounded-lg inline-block max-w-xs">Hello! How can I assist you today?</div></div>
                                        <div class="mb-4 flex justify-end"><div id="preview-user-bubble" class="p-3 rounded-lg inline-block max-w-xs">Let's get started.</div></div>
                                    </div>
                                    <div id="content-Settings" class="app-tab-content">
                                        <h3 class="font-bold text-xl mb-4">Model Settings</h3>
                                        <p class="text-sm opacity-70 mb-4">The <span class="font-bold text-violet-400">Pro Build</span> includes an optimized model. For the <span class="font-bold text-green-400">Free Shell</span>, download any GGUF model and load it into the app yourself.</p>
                                        <button id="check-system-btn" class="app-button px-4 py-2 rounded-md text-sm font-semibold">Check System for Compatibility</button>
                                        <div id="gguf-model-list" class="mt-4 space-y-2"></div>
                                    </div>
                                    <div id="content-Code" class="app-tab-content"><p class="opacity-50 text-center mt-8">Code Editor Tool (Pro Feature).</p></div>
                                    <div id="content-Knowledge" class="app-tab-content"><p class="opacity-50 text-center mt-8">Knowledge Base Tool (Pro Feature).</p></div>
                                </div>
                            </div>
                        </div>
                     </div>
                </div>
            </div>
        </section>

        <section id="finalize" class="step-card rounded-2xl p-8 md:p-12">
            <div class="text-center">
                <h2 class="text-3xl md:text-4xl font-bold"><span class="text-indigo-400">Step 3:</span> Finalize & Forge Your AI</h2>
                <p class="text-lg text-gray-400 max-w-2xl mx-auto mt-4 mb-10">Choose your build. Get a customizable UI shell for free, or upgrade to Pro for a fully integrated, optimized AI powerhouse.</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div class="tier-card rounded-lg p-8 flex flex-col">
                    <h3 class="text-2xl font-bold text-green-400">Standard Shell</h3>
                    <p class="text-gray-400 mt-2 mb-6 flex-grow">A standalone application with your custom UI. Works with any GGUF model you provide.</p>
                    <ul class="space-y-3 text-gray-300 mb-8">
                        <li>Custom UI & Theme</li>
                        <li>Personality File Included</li>
                        <li class="disabled">Optimized AI Model</li>
                        <li class="disabled">Integrated Pro Tools</li>
                    </ul>
                    <button id="download-free-btn" class="mt-auto w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed">
                        Forge Free Shell (.exe)
                    </button>
                </div>
                <div class="tier-card pro rounded-lg p-8 flex flex-col">
                    <div class="flex justify-between items-center">
                        <h3 class="text-2xl font-bold text-violet-400">Pro Build</h3>
                        <span class="pro-badge">Recommended</span>
                    </div>
                    <p class="text-gray-400 mt-2 mb-6 flex-grow">A complete, ready-to-run application with a fine-tuned model and all your selected tools built-in.</p>
                     <ul class="space-y-3 text-gray-300 mb-8">
                        <li>Everything in Standard</li>
                        <li>Optimized AI Model</li>
                        <li>Integrated Pro Tools</li>
                        <li>Priority Support</li>
                    </ul>
                    <a id="pro-upgrade-link" href="#" target="_blank" class="mt-auto block w-full text-center bg-gradient-to-r from-violet-600 to-indigo-600 hover:from-violet-700 hover:to-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-all transform hover:scale-105">
                        Upgrade to Pro & Build
                    </a>
                </div>
            </div>
        </section>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- CONFIGURATION ---
        const STRIPE_PRO_LINK = 'YOUR_STRIPE_LINK_HERE';

        const state = {
            projectName: 'My Productivity App',
            aiDescription: '',
            systemSpecs: { vram: null },
            customization: {
                shell: { theme: 'dark', accentColor: '#6366f1' },
                chat: { aiBubble: '#374151', userBubble: '#6366f1' },
                tools: { Code: false, Knowledge: false }
            }
        };

        const ui = {
            projectNameEl: document.getElementById('project-name'),
            gizmoAccordions: document.querySelectorAll('.gizmo-accordion'),
            appThemeSelect: document.getElementById('app-theme'),
            accentColorPicker: document.getElementById('accent-color'),
            aiBubbleColorPicker: document.getElementById('ai-bubble-color'),
            userBubbleColorPicker: document.getElementById('user-bubble-color'),
            toolToggles: document.querySelectorAll('.tool-toggle'),
            canvasPreview: document.getElementById('canvas-preview'),
            appTitleText: document.getElementById('app-title-text'),
            appTabBar: document.querySelector('.app-tab-bar'),
            appContentArea: document.querySelector('.app-content-area'),
            aiBubble: document.getElementById('preview-ai-bubble'),
            userBubble: document.getElementById('preview-user-bubble'),
            checkSystemBtn: document.getElementById('check-system-btn'),
            ggufModelList: document.getElementById('gguf-model-list'),
            downloadFreeBtn: document.getElementById('download-free-btn'),
            proUpgradeLink: document.getElementById('pro-upgrade-link'),
        };

        // --- CORE FUNCTIONS ---
        function updateState(path, value) {
            let keys = path.split('.');
            let obj = state;
            keys.slice(0, -1).forEach(key => obj = obj[key]);
            obj[keys.at(-1)] = value;
            renderAll();
        }

        function renderAll() {
            renderShell();
            renderChat();
            renderTabs();
            renderSettingsTab();
        }
        
        // --- RENDERERS ---
        function renderShell() {
            const { theme, accentColor } = state.customization.shell;
            ui.canvasPreview.className = `theme-${theme}`;
            ui.canvasPreview.style.setProperty('--shell-accent', accentColor);
            ui.appTitleText.textContent = state.projectName;
        }

        function renderChat() {
            const { aiBubble, userBubble } = state.customization.chat;
            ui.aiBubble.style.backgroundColor = aiBubble;
            ui.userBubble.style.backgroundColor = userBubble;
            ui.aiBubble.style.color = getContrastYIQ(aiBubble);
            ui.userBubble.style.color = getContrastYIQ(userBubble);
        }

        function renderTabs() {
            const defaultTabs = ['Chat', 'Settings'];
            const toolTabs = Object.keys(state.customization.tools).filter(key => state.customization.tools[key]);
            const allTabs = [...defaultTabs, ...toolTabs];
            
            ui.appTabBar.innerHTML = allTabs.map((tabName, index) => 
                `<h3 class="app-tab p-3 cursor-pointer ${index === 0 ? 'active' : ''}" data-tab="${tabName}">${tabName}</h3>`
            ).join('');
            switchTab(document.querySelector('.app-tab.active')?.dataset.tab || 'Chat');
        }
        
        function renderSettingsTab() {
            const models = [
                { name: 'TinyLlama-1.1B', vram: 2 }, { name: 'Mistral-7B', vram: 6 },
                { name: 'Llama3-8B', vram: 8 }, { name: 'Mixtral-8x7B', vram: 24 }
            ];
            const userVRAM = state.systemSpecs.vram;
            ui.ggufModelList.innerHTML = models.map(model => {
                let statusClass = 'bg-gray-600', statusText = 'Unknown';
                if (userVRAM !== null) {
                    if (userVRAM >= model.vram) {
                        statusClass = 'bg-green-600'; statusText = 'Compatible';
                    } else {
                        statusClass = 'bg-red-600'; statusText = 'Incompatible';
                    }
                }
                return `
                    <div class="p-3 rounded-lg flex justify-between items-center" style="background-color: rgba(0,0,0,0.2);">
                        <p class="font-semibold">${model.name} (~${model.vram}GB VRAM)</p>
                        <span class="text-xs font-bold px-2 py-1 rounded-full ${statusClass}">${statusText}</span>
                    </div>`;
            }).join('');
        }

        // --- EVENT HANDLERS ---
        function switchTab(tabName) {
            document.querySelectorAll('.app-tab').forEach(t => t.classList.toggle('active', t.dataset.tab === tabName));
            document.querySelectorAll('.app-tab-content').forEach(c => c.classList.toggle('active', c.id === `content-${tabName}`));
        }

        function simulateSystemCheck() {
            ui.checkSystemBtn.textContent = 'Checking...';
            ui.checkSystemBtn.disabled = true;
            setTimeout(() => {
                updateState('systemSpecs.vram', Math.min(16, Math.floor((navigator.deviceMemory || 8) / 2)));
                ui.checkSystemBtn.textContent = 'Re-check System';
                ui.checkSystemBtn.disabled = false;
            }, 1500);
        }

        function simulateFreeDownload(button) {
            const originalText = button.textContent;
            button.textContent = 'Forging Shell...';
            button.disabled = true;
            setTimeout(() => {
                button.textContent = 'Downloading...';
                setTimeout(() => {
                    button.textContent = originalText;
                    button.disabled = false;
                }, 2000);
            }, 2500);
        }
        
        // --- EVENT LISTENERS ---
        function setupEventListeners() {
            ui.projectNameEl.addEventListener('input', e => updateState('projectName', e.target.value));

            ui.gizmoAccordions.forEach(acc => {
                const header = acc.querySelector('.gizmo-accordion-header');
                const content = acc.querySelector('.gizmo-accordion-content');
                header.addEventListener('click', () => { content.style.maxHeight = content.style.maxHeight ? null : content.scrollHeight + 'px'; });
            });

            ui.appThemeSelect.addEventListener('input', e => updateState('customization.shell.theme', e.target.value));
            ui.accentColorPicker.addEventListener('input', e => updateState('customization.shell.accentColor', e.target.value));
            ui.aiBubbleColorPicker.addEventListener('input', e => updateState('customization.chat.aiBubble', e.target.value));
            ui.userBubbleColorPicker.addEventListener('input', e => updateState('customization.chat.userBubble', e.target.value));
            ui.toolToggles.forEach(toggle => {
                toggle.addEventListener('change', e => updateState(`customization.tools.${e.target.dataset.tool}`, e.target.checked));
            });

            ui.appTabBar.addEventListener('click', e => { if(e.target.matches('.app-tab')) switchTab(e.target.dataset.tab); });
            ui.checkSystemBtn.addEventListener('click', simulateSystemCheck);
            ui.downloadFreeBtn.addEventListener('click', e => simulateFreeDownload(e.target));
            ui.proUpgradeLink.href = STRIPE_PRO_LINK;
        }

        function getContrastYIQ(hex) {
            hex = hex.replace("#", "");
            const r = parseInt(hex.substr(0, 2), 16), g = parseInt(hex.substr(2, 2), 16), b = parseInt(hex.substr(4, 2), 16);
            return ((r * 299) + (g * 587) + (b * 114)) / 1000 >= 128 ? 'black' : 'white';
        }

        // --- INITIALIZATION ---
        setupEventListeners();
        renderAll();
    });
    </script>
</body>
</html>
